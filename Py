import telebot
from openpyxl import *
from telebot import types

token = "5946905739:AAFOF4jmWwy39nCzCxjnvSAx8sy0HnBBc_8"
bot = telebot.TeleBot(token)


@bot.message_handler(commands=["start"])
def menu(message):
    us_id = message.from_user.id
    markup2 = types.ReplyKeyboardMarkup(resize_keyboard=True)
    btn11 = types.KeyboardButton("Внести изменение в бюджет")
    btn12 = types.KeyboardButton("Мои доходы")
    btn13 = types.KeyboardButton("Мои расходы")
    btn14 = types.KeyboardButton("Мой профиль")
    markup2.add(btn11, btn12, btn13, btn14)
    bot.send_message(message.chat.id, text="Чем я могу вам помочь?", reply_markup=markup2)


@bot.message_handler(content_types=['text'])
def _command_(message):
    flag1 = False
    if message.text == "Внести изменение в бюджет":
        markup3 = types.ReplyKeyboardMarkup(resize_keyboard=True)
        btn21 = types.KeyboardButton("Добавить доход")
        btn22 = types.KeyboardButton("Добавить расход")
        btn23 = types.KeyboardButton("В меню")
        markup3.add(btn21, btn22, btn23)
        bot.send_message(message.chat.id, text="Выберите тип изменения", reply_markup=markup3)

    elif (message.text == "Добавить доход"):
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        btn1 = types.KeyboardButton("Зарплата")
        btn2 = types.KeyboardButton("Стипендия")
        btn3 = types.KeyboardButton("Карманные деньги")
        btn4 = types.KeyboardButton("Соц. выплаты")
        btn5 = types.KeyboardButton("Другое")
        btn6 = types.KeyboardButton("В меню")
        markup.add(btn1, btn2, btn3, btn4, btn5, btn6)
        bot.send_message(message.chat.id, text="Выберите категорию", reply_markup=markup)
    elif (message.text == "Зарплата") or (message.text == "Стипендия") or (message.text == "Карманные деньги") or (
            message.text == "Соц. выплаты") or (message.text == "Другое"):
        flag1 = True
        markup6 = types.ReplyKeyboardMarkup(resize_keyboard=True)
        btn61 = types.KeyboardButton("Наличные")
        btn62 = types.KeyboardButton("Безналичные")
        markup6.add(btn61, btn62)
        bot.send_message(message.chat.id, text="Выберите счёт", reply_markup=markup6)

    elif (message.text == "Добавить расход"):
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        btn1 = types.KeyboardButton("Товары и быт")
        btn2 = types.KeyboardButton("Транспорт")
        btn3 = types.KeyboardButton("Развлечения")
        btn4 = types.KeyboardButton("Медицина")

        btn5 = types.KeyboardButton("Услуги")
        btn6 = types.KeyboardButton("Другое")
        btn7 = types.KeyboardButton("В меню")
        markup.add(btn1, btn2, btn3, btn4, btn5, btn6, btn7)
        bot.send_message(message.chat.id, text="Выберите категорию", reply_markup=markup)
    elif (message.text == "Товары и быт") or (message.text == "Развлечения") or (message.text == "Транспорт") or (
            message.text == "Медицина") or \
            (message.text == "Услуги") or (message.text == "Другое"):
        markup6 = types.ReplyKeyboardMarkup(resize_keyboard=True)
        btn61 = types.KeyboardButton("Наличные")
        btn62 = types.KeyboardButton("Безналичные")
        markup6.add(btn61, btn62)
        bot.send_message(message.chat.id, text="Выберите счёт", reply_markup=markup6)

    elif (message.text == "Наличные") or (message.text == "Безналичные"):
        bot.send_message(message.chat.id, text="Введите сумму")
        bot.register_next_step_handler(message, add_money)
def add_money(message):
    money = message.text
    print(money)
def profile(message):
    if (message.text == "Мой профиль"):
        bot.send_message(message.chat.id, text="ок")


def income(message):
    if message.text == "Мои доходы":
        markup5 = types.ReplyKeyboardMarkup(resize_keyboard=True)
        btn51 = types.KeyboardButton("За этот месяц")
        btn52 = types.KeyboardButton("За прошлые месяцы")
        btn53 = types.KeyboardButton("За всё время")
        markup5.add(btn51, btn52, btn53)
        bot.send_message(message.chat.id, text="Выберите сроки", reply_markup=markup5)
def expense(message):
    if message.text == "Мои расходы":
        markup5 = types.ReplyKeyboardMarkup(resize_keyboard=True)
        btn51 = types.KeyboardButton("За этот месяц")
        btn52 = types.KeyboardButton("За прошлые месяцы")
        btn53 = types.KeyboardButton("За всё время")
        markup5.add(btn51, btn52, btn53)
        bot.send_message(message.chat.id, text="Выберите сроки", reply_markup=markup5)


def back(message):
    if (message.text == "В меню"):
        markup2 = types.ReplyKeyboardMarkup(resize_keyboard=True)
        btn11 = types.KeyboardButton("Внести изменение в бюджет")
        btn12 = types.KeyboardButton("Мои доходы")
        btn13 = types.KeyboardButton("Мои расходы")
        btn14 = types.KeyboardButton("Мой аккаунт")
        btn15 = types.KeyboardButton("В меню")
        markup2.add(btn11, btn12, btn13, btn14, btn15)
        bot.send_message(message.chat.id, text="Чем я могу вам помочь?", reply_markup=markup2)


bot.infinity_polling()
